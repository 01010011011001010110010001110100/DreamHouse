@using DreamHouse.Core.Application.ViewModels.Home
@model AdminHomeViewModel

@{
    ViewData["Title"] = "Admin Home";
}

<div class="container-fluid">
    <div class="container">
        <h1 class="mt-4 fw-bold bg-primary text-light rounded-3 p-1 m-3 ps-4">Dashboard</h1>

        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h3 class="card-title bold fw-light">Agents</h3>
                        <canvas id="agentsChart" style="max-height: 200px;"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h3 class="card-title fw-light">Clients</h3>
                        <canvas id="clientsChart" style="max-height: 200px;"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h3 class="card-title fw-light">Developers</h3>
                        <canvas id="developersChart" style="max-height: 200px;"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            
            <div class="col-md-12 text-center">
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body">
                        <h3 class="card-title fw-light">Properties Registered</h3>
                        <h1 class="display-4 fw-bold text-primary">@Model.CuantityPropertyResgistered</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Agents Chart
        var agentsData = {
            labels: ['Active Agents', 'Inactive Agents'],
            datasets: [{
                label: 'Agents',
                data: [@Model.ActiveAgents, @Model.InactiveAgents],
                backgroundColor: ['rgba(75, 192, 192, 0.6)', 'rgba(255, 99, 132, 0.6)'],
                hoverOffset: 4,
                borderWidth: 0
            }]
        };

        var agentsConfig = {
            type: 'doughnut',
            data: agentsData,
            options: {
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom'
                    }
                }
            }
        };

        var agentsChart = new Chart(
            document.getElementById('agentsChart'),
            agentsConfig
        );

        // Clients Chart
        var clientsData = {
            labels: ['Active Clients', 'Inactive Clients'],
            datasets: [{
                label: 'Clients',
                data: [@Model.ActiveClients, @Model.InactiveClients],
                backgroundColor: ['rgba(153, 102, 255, 0.6)', 'rgba(255, 205, 86, 0.6)'],
                hoverOffset: 4,
                borderWidth: 0
            }]
        };

        var clientsConfig = {
            type: 'doughnut',
            data: clientsData,
            options: {
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom'
                    }
                }
            }
        };

        var clientsChart = new Chart(
            document.getElementById('clientsChart'),
            clientsConfig
        );

        // Developers Chart
        var developersData = {
            labels: ['Active Devs', 'Inactive Devs'],
            datasets: [{
                label: 'Developers',
                data: [@Model.ActiveDevelopers, @Model.InactiveDevelopers],
                backgroundColor: ['rgba(54, 162, 235, 0.6)', 'rgba(255, 159, 64, 0.6)'],
                hoverOffset: 4,
                borderWidth: 0
            }]
        };

        var developersConfig = {
            type: 'doughnut',
            data: developersData,
            options: {
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom'
                    }
                }
            }
        };

        var developersChart = new Chart(
            document.getElementById('developersChart'),
            developersConfig
        );
    });
</script>
